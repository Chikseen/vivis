export default (nuxtConfig) => ({
    ready: () => {
        const ColorThief = require("colorthief");
        const fs = require('fs');
        const path = require('path');

        console.log("start");

        // Current Workaround will change soon

        const img = path.join(__dirname + "/../" + "assets/Images/testImgs/Hund_Dig.jpg");
        console.log(img);

        ColorThief.getColor(img, 2)
            .then((color) => {
                color = color.map((c) => c - 10); // Darken the base color

                const color_I = color.map((c) => c + 20);
                const color_II = color;
                const color_III = color.map((c) => c - 20);

                console.log("C I: ", color_I);
                console.log("C II: ", color_II);
                console.log("C III: ", color_III);

                const string = `$mainColor: linear-gradient(-45deg, rgb(${color_I.join(',')}) 0%, rgb(${color_II.join(',')}) 46%, rgb(${color_III.join(',')}) 100%)`;

                fs.writeFileSync(path.join(__dirname + "/../" + "assets/styles/autoGenerated/mainImg.scss"), string)
            })
            .catch((err) => {
                console.log(err);
            });

        ColorThief.getPalette(img, 2, 2)
            .then((palette) => {
                console.log(palette);
            })
            .catch((err) => {
                console.log(err);
            });
    },
});